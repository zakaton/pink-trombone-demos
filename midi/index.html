<html>
  <head>
    <title>Midi</title>
    <script src="/src/utils.js"></script>
    <script src="https://unpkg.com/tone@15.1.22/build/Tone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/webmidi@latest/dist/iife/webmidi.iife.js"></script>
  </head>
  <style>
    #mapping {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
  </style>
  <body>
    <nav>
      <a href="../../">home</a>
    </nav>

    <label>
      Octave offset
      <input id="octaveOffset" type="number" min="-3" max="3" value="1" />
    </label>
    <br />
    <label>
      whisper
      <input id="whisper" type="checkbox" />
    </label>
    <br />
    <label>
      speed
      <input type="number" value="1" id="speed" step="0.1" min="0.1" max="5" />
    </label>
    <br />
    <label>Frequency: <span id="frequency"></span></label>
    <br />
    <label> Attack Velocity: <span id="attackVelocity"></span> </label>
    <br />
    <label hidden> Release Velocity: <span id="releaseVelocity"></span> </label>

    <label>
      phoneme
      <select id="phoneme">
        <option value="">--select phoneme--</option>
        <optgroup id="vowels" label="vowels"></optgroup>
        <optgroup id="consonants" label="consonants"></optgroup>
      </select>
    </label>
    <br />
    <label hidden>
      utterance
      <select id="utterance">
        <option value="">--select utterance--</option>
      </select>
    </label>
    <label>
      text-to-speech <textarea id="ttsInput" placeholder="text"></textarea>
    </label>
    <br />
    <label>
      phoneme-to-speech
      <textarea placeholder="phonemes" id="ptsInput"></textarea>
    </label>
    <br />
    <label>
      mode
      <select id="mode">
        <optgroup label="select mode"></optgroup>
      </select>
    </label>
    <button id="play">play</button>

    <pre id="midiMessage"></pre>

    <label>
      load mapping
      <input id="loadMapping" type="file" accept=".json,application/json" />
    </label>
    <br />
    <button id="saveMapping" disabled>save maps</button>
    <button id="addMap">add map</button>
    <button id="deleteAllMaps" disabled>delete all maps</button>

    <br />
    <br />

    <div id="mapping">
      <template id="mapTemplate">
        <div class="map">
          <label>
            type
            <select class="type">
              <optgroup label="select type"></optgroup>
            </select>
          </label>
          <label>ignore <input class="ignore" type="checkbox" /></label>
          <button class="delete">delete</button>
          <br />
          <label>auto map <input class="autoMap" type="checkbox" /></label>
          <label>
            channel
            <input
              class="channel"
              type="number"
              step="1"
              min="1"
              value="1"
              max="16"
            />
          </label>
          <label>
            number
            <input
              class="number"
              type="number"
              step="1"
              min="0"
              value="0"
              max="127"
          /></label>
          <label>
            value
            <input
              disabled
              class="value"
              type="number"
              min="0"
              max="1"
              step="0.001"
            />
          </label>
          <label>
            output value
            <input
              disabled
              class="outputValue"
              type="number"
              min="0"
              max="1"
              step="0.001"
            />
          </label>
          <br />

          <label>
            input range min
            <input
              class="inputRangeMin"
              type="number"
              min="0"
              max="1"
              step="0.001"
            />
          </label>
          <label>
            input range max
            <input
              class="inputRangeMax"
              type="number"
              min="0"
              max="1"
              step="0.001"
            />
          </label>
          <br />

          <label>
            output range min
            <input class="outputRangeMin" type="number" />
          </label>
          <label>
            output range max
            <input class="outputRangeMax" type="number" />
          </label>
          <label>relative <input class="isRelative" type="checkbox" /></label>
        </div>
      </template>
    </div>
  </body>
  <script src="/midi/src/script.js" type="module"></script>
</html>
